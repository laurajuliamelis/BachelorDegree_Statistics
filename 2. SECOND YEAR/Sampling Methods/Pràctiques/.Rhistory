Nh <- table(base$Size_pob) ##poblacion en estrato h
N<- sum(Nh)
library(sampling)
base<-read.table("AnuarioN.CSV",header=TRUE,sep=";",dec=",",row.names=1)## seleccionamos solo la funcion sin el base
names(base)
setwd("~/Desktop/Pràctiques")
library(sampling)
base<-read.table("AnuarioN.CSV",header=TRUE,sep=";",dec=",",row.names=1)## seleccionamos solo la funcion sin el base
names(base)
Nh <- table(base$Size_pob) ##poblacion en estrato h
N<- sum(Nh)
Nh
View(base)
View(base)
nh
n=50
nh=Nh*(n/N)
nh=(round(nh))
sum(nh) ## Al
nh
s=strata(base, stratanames=c("Size_pob"),size=nh, method="srswor", description=TRUE )#
s
muestra <- getdata(base,s)
y=muestra$ActComMinor
y
totaly=HTstrata(Y,muestra$Prob,muestra$Stratum,description=TRUE)
totaly ## Estimaci?n Puntua
totaly=HTstrata(nh,muestra$Prob,muestra$Stratum,description=TRUE)
nh=c(12,12,13,11,2) ##
totaly=HTstrata(nh,muestra$Prob,muestra$Stratum,description=TRUE)
totaly=HTstrata(Nh,muestra$Prob,muestra$Stratum,description=TRUE)
totaly=HTstrata(s,muestra$Prob,muestra$Stratum,description=TRUE)
View(muestra)
View(muestra)
totaly=HTstrata(y,muestra$Prob,muestra$Stratum,description=TRUE)
##Pr?ctica 2
##muestreo aleatorio estratificado con variable
##de practica 1 y estratificar en size plob
library(sampling)
base<-read.table("AnuarioN.CSV",header=TRUE,sep=";",dec=",",row.names=1)## seleccionamos solo la funcion sin el base
names(base)
Nh <- table(base$Size_pob) ##poblacion en estrato h
N<- sum(Nh)
##Reparto Proporcional
##nh==Nh*(n/N)
n=50
nh=Nh*(n/N)
nh=(round(nh))
sum(nh) ## Al redondear (round), nos puede dar algun factor m?s que el de la n de muestra que tenemos
## en este caso n es 50 y nos ha dado 51 al redondear, por lo tanto quitamos algun factor
nh=c(12,12,13,11,2) ## antes era c(12,13,13,11,2)
sum(nh)
s=strata(base, stratanames=c("Size_pob"),size=nh, method="srswor", description=TRUE )## funcion
##para muestro estratificado que podemos usar con probabilidades iguales o no. damos los datos,
##el valor de los estratos si queremos o no, el tama?o de cada estrato, el metodo (distribucion d prob o tipo de muestreo...)
##Simular muestreo
muestra <- getdata(base,s)
y=muestra$ActComMinor
totaly=HTstrata(y,muestra$Prob,muestra$Stratum,description=TRUE)
totaly ##
y1=muestra$ActComMinor[s$Stratum==1]##estrato1
y2=muestra$ActComMinor[s$Stratum==2]##estrato2
y3=muestra$ActComMinor[s$Stratum==3]##estrato3
y4=muestra$ActComMinor[s$Stratum==4]##estrato4
y5=muestra$ActComMinor[s$Stratum==5]##estrato5
varhat1=varest(y1,pik=muestra$Prob[s$Stratum==1])## Varianza estimada para el estrato 1
varhat2=varest(y2,pik=muestra$Prob[s$Stratum==2])## Varianza estimada para el estrato 2
varhat3=varest(y3,pik=muestra$Prob[s$Stratum==3])## Varianza estimada para el estrato 3
varhat4=varest(y4,pik=muestra$Prob[s$Stratum==4])## Varianza estimada para el estrato 4
varhat5=varest(y5,pik=muestra$Prob[s$Stratum==5])## Varianza estimada para el estrato 5
Y=base$ActComMinor
Y1=getdata(base$ActComMinor,base$Size_pob=="1")
Y2=getdata(base$ActComMinor,base$Size_pob=="2")
Y3=getdata(base$ActComMinor,base$Size_pob=="3")
Y4=getdata(base$ActComMinor,base$Size_pob=="4")
Y5=getdata(base$ActComMinor,base$Size_pob=="5")
s2_1=var(Y1)
s2_2=var(Y2)
s2_3=var(Y3)
s2_4=var(Y4)
s2_5=var(Y5)
s2_h <- rbind(s2_1,s2_2,s2_3,s2_4,s2_5)
s2_h <- as.vector(s2_h)
s2T <- sum(as.vector(s2_h))
Ypob1=getdata(base$ActComMinor,base$Size_pob==1)
Ypob1=getdata(base$ActComMinor,base$Size_pob==1)
library(sampling)
base<-read.table("AnuarioN.CSV",header=TRUE,sep=";",dec=",",row.names=1)## seleccionamos solo la funcion sin el base
names(base)
## REPARTO ÓPTIMO
Ypob1=getdata(base$ActComMinor,base$Size_pob==1)
Ypob1=Ypob1$data
Ypob1=base$ActComMinor[base$Size_pob==1]
Ypob2=base$ActComMinor[base$Size_pob==2]
Ypob3=base$ActComMinor[base$Size_pob==3]
Ypob4=base$ActComMinor[base$Size_pob==4]
Ypob5=base$ActComMinor[base$Size_pob==5]
head(Ypob2)
